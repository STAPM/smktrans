<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Adjust probabilities of ever-smoking — init_adj • smktrans</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Adjust probabilities of ever-smoking — init_adj"><meta property="og:description" content="Takes the probabilities of ever-smoking estimated from respondent recall and adjusts them
according to the reported proportions of ever-smokers at a reference age."><meta property="og:image" content="https://stapm.gitlab.io/r-packages/smktrans/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-167990045-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167990045-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">smktrans</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/smktrans.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Technical documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/smk_trans_prob_estimation.html">Estimation workflow</a>
    </li>
    <li>
      <a href="../articles/smoking_transition_probabilities_modelling_report.pdf">Methods notes: Smoking state transition probability estimation</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://gitlab.com/stapm/r-packages/smktrans" class="external-link">
    <span class="fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://stapm.gitlab.io/software.html" class="external-link">
    <span class="fa fa-code"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Adjust probabilities of ever-smoking</h1>
    
    <div class="hidden name"><code>init_adj.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Takes the probabilities of ever-smoking estimated from respondent recall and adjusts them
according to the reported proportions of ever-smokers at a reference age.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">init_adj</span><span class="op">(</span></span>
<span>  <span class="va">init_data</span>,</span>
<span>  <span class="va">ever_smoke_data</span>,</span>
<span>  ref_age <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  cohorts <span class="op">=</span> <span class="fl">1973</span><span class="op">:</span><span class="fl">2020</span>,</span>
<span>  period_start <span class="op">=</span> <span class="fl">2003</span>,</span>
<span>  period_end <span class="op">=</span> <span class="fl">2018</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>init_data</dt>
<dd><p>Data table - raw estimates of the probabilities of 
ever-smoking by age, sex and IMD quintile.</p></dd>


<dt>ever_smoke_data</dt>
<dd><p>Data table - reference values for the proportion of ever-smokers.</p></dd>


<dt>ref_age</dt>
<dd><p>Integer - the index age for calibration</p></dd>


<dt>cohorts</dt>
<dd><p>Integer vector - the cohorts to be adjusted. 
The min cohort might sensibly be period_start - ref_age, 
and the max cohort might be the baseline year of the model e.g. 2020.</p></dd>


<dt>period_start</dt>
<dd><p>Integer - the first year of data (England - 2003, Scotland - 2008)</p></dd>


<dt>period_end</dt>
<dd><p>Integer - the last year of data</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns an updated version of init_data with a new 
variable containing the adjusted values for
the probabilities of ever smoking. The data has also 
been filtered to only include cohorts for which it is possible
to make an adjustment.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This is based on the method applied by Holford et al. (2014)
.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Holford TR, Levy DT, McKay LA, Clarke L, Racine B, Meza R, Land S, Jeon J, Feuer EJ (2014).
“Patterns of birth cohort--specific smoking histories, 1965--2009.”
<em>American journal of preventive medicine</em>, <b>46</b>(2), e31--e37.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Estimate the raw probabilities of ever-smoking</span></span></span>
<span class="r-in"><span><span class="va">init_data_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="init_est.html">init_est</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">hse_data</span>,</span></span>
<span class="r-in"><span>  strat_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"imd_quintile"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Estimate the reference values - observed proportions of ever-smokers</span></span></span>
<span class="r-in"><span><span class="va">ever_smoke_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="ever_smoke.html">ever_smoke</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">hse_data</span>,</span></span>
<span class="r-in"><span>  time_horizon <span class="op">=</span> <span class="fl">2100</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adjust the probabilities of ever-smoking</span></span></span>
<span class="r-in"><span><span class="va">init_data_adj</span> <span class="op">&lt;-</span> <span class="fu">init_adj</span><span class="op">(</span></span></span>
<span class="r-in"><span>  init_data <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">init_data_raw</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ever_smoke_data <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">ever_smoke_data</span><span class="op">$</span><span class="va">predicted_values</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ref_age <span class="op">=</span> <span class="fl">30</span>,</span></span>
<span class="r-in"><span>  cohorts <span class="op">=</span> <span class="fl">1971</span><span class="op">:</span><span class="fl">2020</span>, <span class="co"># 50 cohorts</span></span></span>
<span class="r-in"><span>  period_start <span class="op">=</span> <span class="fl">2001</span>,</span></span>
<span class="r-in"><span>  period_end <span class="op">=</span> <span class="fl">2016</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d" class="external-link">Duncan Gillespie</a>, Laura Webster, Grace Leeming, Magdalena Opazo-Breton, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a" class="external-link">Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

