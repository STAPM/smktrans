<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Statistically model trends in current, former and never smoking — trend_fit • smktrans</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Statistically model trends in current, former and never smoking — trend_fit" />
<meta property="og:description" content="Fit a multinomial model to the distribution of people 
among current, former and never smoking status
and estimate the variation in trends by sex and socioeconomic conditions in terms of
quintiles of the Index of Multiple Deprivation." />
<meta property="og:image" content="https://stapm.gitlab.io/r-packages/smktrans/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">smktrans</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/smktrans.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/index.html">Technical documentation</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://gitlab.com/stapm/r-packages/smktrans">
    <span class="fab fa fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://stapm.gitlab.io/software.html">
    <span class="fa fa-code"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Statistically model trends in current, former and never smoking</h1>
    
    <div class="hidden name"><code>trend_fit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fit a multinomial model to the distribution of people 
among current, former and never smoking status
and estimate the variation in trends by sex and socioeconomic conditions in terms of
quintiles of the Index of Multiple Deprivation.</p>
    </div>

    <pre class="usage"><span class='fu'>trend_fit</span><span class='op'>(</span>
  <span class='va'>data</span>,
  max_iterations <span class='op'>=</span> <span class='fl'>1000</span>,
  age_var <span class='op'>=</span> <span class='st'>"age"</span>,
  year_var <span class='op'>=</span> <span class='st'>"year"</span>,
  sex_var <span class='op'>=</span> <span class='st'>"sex"</span>,
  smoker_state_var <span class='op'>=</span> <span class='st'>"smk.state"</span>,
  imd_var <span class='op'>=</span> <span class='st'>"imd_quintile"</span>,
  weight_var <span class='op'>=</span> <span class='st'>"wt_int"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Data table containing individual-level survey data over multiple years.</p></td>
    </tr>
    <tr>
      <th>max_iterations</th>
      <td><p>Integer - the maximum number of iterations to try when looking for the
multinomial model to converge to a stable model fit.</p></td>
    </tr>
    <tr>
      <th>age_var</th>
      <td><p>Character - the name of the variable containing age in single years.</p></td>
    </tr>
    <tr>
      <th>year_var</th>
      <td><p>Character - the name of the variable containing year in single years.</p></td>
    </tr>
    <tr>
      <th>sex_var</th>
      <td><p>Character - the name of the variable containing sex (m/f).</p></td>
    </tr>
    <tr>
      <th>smoker_state_var</th>
      <td><p>Character - the name of the variable containing smoking status
(current, former, never smoker).</p></td>
    </tr>
    <tr>
      <th>imd_var</th>
      <td><p>Character - the name 
of the variable containing Index of Multiple Deprivation quintiles.</p></td>
    </tr>
    <tr>
      <th>weight_var</th>
      <td><p>Character - the name of the variable containing the survey weights.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a data table containing the fitted values by age, year, sex and IMD quintile.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The explanatory variables for age and year are specified 
in the form of a cubic response surface.
An additional 4th order term for age is added to better capture 
the non-linear patterns over age e.g.
as individuals initiate and then quit with age. 
Interactions of this surface with sex and IMD quintiles
are limited to 3rd order terms. Interactions with the quadratic 
term are included for age but not for year
to avoid over-fitting variation in the trend over years, 
which is more of a linear change than the pattern over age.
The decision to do so was made after visually exploring the fit of 
simpler and more complex model specifications
to the data.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='va'>test_data</span> <span class='op'>&lt;-</span> <span class='fu'>trend_fit</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>hse_data</span><span class='op'>)</span>

<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d'>Duncan Gillespie</a>, Laura Webster, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a'>Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


